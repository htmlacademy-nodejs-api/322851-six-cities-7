# Как работать над проектом

## Окружение

Для удобства работы над проектом используются инструменты из **Node.js** и **npm**. Все необходимые настройки произведены. Убедитесь, что на рабочем компьютере установлен актуальный LTS релиз Node.js**. Актуальная версия **Node.js** указана в файле `package.json` в поле `node`. Затем, в терминале, перейдите в директорию с проектом и _единожды_ запустите команду:

```bash
npm install
```

Команда запустит процесс установки зависимостей проекта из **npm**.

### Сценарии

В `package.json` предопределено несколько сценариев.

#### Скомпилировать проект

```bash
npm run compile
```

Создаст директорию `dist` и скомпилирует проект.

#### Удалить скомпилированный проект

```bash
npm run clean
```

Удаляет директорию `dist`. Используется перед компиляцией.

#### Собрать проект

```bash
npm run build
```

Выполняет сборку проекта: удаляет ранее скомпилированный проект и компилирует заново.

#### Проверить линтером

```bash
npm run lint
```

Запуск проверки проекта статическим анализатором кода **ESLint**.

Линтер проверяет файлы только внутри директории `src`.

**Обратите внимание**, при запуске данной команды, ошибки выводятся в терминал.

#### Запустить ts-модуль без компиляции

```bash
npm run ts -- <Путь к модулю с ts-кодом>
```

Пакет `ts-node` позволяет выполнить TS-код в Node.js без предварительной компиляции. Используется только на этапе разработки.

#### Запустить CLI interface

```bash
npm run ts src/main.cli.ts  -- --<Имя команды> 
```

Запускает CLI interface.  Список доступных команды:

 --version:                   # выводит номер версии
 --help:                      # выводит список команд
 --import <path> <DB_USER> <DB_PASSWORD> <DB_HOST> <DB_NAME> <SECRET>  # импортирует данные из TSV в базу данных
 --generate <n> <path> <url>  # генерирует произвольное количество тестовых данных

#### Запустить проект

```bash
npm start
```

В процессе запуска проекта будет выполнен процесс «Сборки проекта» и запуска результирующего кода.

#### Запустить JSON-server для генерации моковых офферов

```bash
npm run mock:server
```

Запускает сервер, к которому обращается генератор предложений.

#### Запустить сервер в режиме разработки 

```bash
npm run start:dev
```

Запуск сервера будет выполнен с помощью библиотеки nodemon, которая осуществляет автоматическую перезагрузку сервера при внесении изменений в файлы проекта.

## Структура проекта

### Директория `src`

Исходный код проекта: компоненты, модули и так далее. Структура директории `src` может быть произвольной.

### Файл `Readme.md`

Инструкции по работе с учебным репозиторием.

### Файл `Contributing.md`

Советы и инструкции по внесению изменений в учебный репозиторий.

### Файл `.env`

Файл с переменными окружения. Список переменных окружения, необходимых для запуска сервера:  
PORT=5000 - Порт, на котором запускается сервер  
SALT=salt - Строка, которая используется при шифровании паролей пользователей  
DB_HOST=127.0.0.1 - Адрес сервера на котором запускается база данных
DB_USER=Test - Логин для доступа к базе данных
DB_PASSWORD=qwerty - Пароль для доступа к базе данных  
DB_PORT=27017 - Порт, на котором запускается база данных  
DB_NAME=Six-cities-db - Имя база данных для проекта  
UPLOAD_DIRECTORY=H:\HA\Six Cities backend\SJ-six-cities-7-back\upload - Путь к директории с загружаемыми файлами пользователей   
JWT_SECRET=verysecret - Строка, которая используется при создании токена  
HOST=localhost - Адрес сервера, на котором запускается проект
STATIC_PATH=H:\HA\Six Cities backend\SJ-six-cities-7-back\static - Путь к директории со статическим файлами

### Остальное

Все остальные файлы в проекте являются служебными. Пожалуйста, не удаляйте и не изменяйте их самовольно. Только если того требует задание или наставник.
